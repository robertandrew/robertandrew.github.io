(function() {

	$(function() {

		//////////////////////////////
		/////OPEN/////////////////////

		//////////////////////////////
		/////GLOBAL VARIABLES/////////
		//////////////////////////////

		//hard-coded dimensions	and other constants
		var	qHeight = 120, //constant
			wfBarHeight = 15, //constant
			marginTop = 30,
			marginBottom = 30,
			marginRight = 30,
			marginLeft = 30,
			betweenCharts = 30,						
			duration = 500; 
				
		//placeholders for the soft dimensions
		var	w, 
				h;
		
		//placeholders/initial values for key stuff
		//
		//////OMNIBUS FUNCTIONS////////////////	
		//
				
		//call everything necessary the first time the page loads
		function init(){
			getData();	
		}

		//call only those functions necessary upon page resize
		function resize(){
			console.log('resized');
		}		

		//
		///////SPECIFIC-PURPOSE FUNCTIONS//////
		//

		//For the record, Math.abs(x); works

		//lay out the SVG and its dimensions
			
		function drawCanvas(){
		
			//get and update screen width
			//use a number of global variables to set vertical dimensions

		}

		function drawQuarters(){
		//methods or modules		
		
		/*data format
		quarter
			pctChg
			fill
		*/
		
		}

		function drawWaterfall(){
		/*data format	
		sector
			pctChg
			fill	
		*/
		
		}
		
		//
		function getWidth(){
		
		}
		
		//DATA HANDLING FUNCTIONS////////////
		
		//returns dataSet appropriate for the quarterly change
		function filterQ(dataSet){
			//pulls out only GDP-related data	
		};		
		
		//returns dataSet appropriate for the waterfall, filtered based on the live quarter
		function filterWf(dataSet){
			
			//removes the unecessary bits of the series
			function filterSeries(seriesData){
			
			};
			
			function			
			
							
		};
		
		
		//returns dataSet nested 

				
		function getData(){
			d3.tsv('series.txt',function(error, seriesData){
			
				//contributions always known as "ribs"
				d3.json('shortRibs.json',function(error,ribsData){
			
					console.log(seriesData);
					console.log(ribsData.BEAAPI.Results.Data);
				})//finish loading JSON and executing all data-dependent functions
			})//finish loading the series ids
		}//close GetData
		


	//Call the only function
	init();
	$(window).resize(function(){
	
		resize();
	});
		
		//////CLOSE MY CALLS/////////
		/////////////////////////////	
	

					var fm = Iframe.init(); // must be at the end of your code
	});

	socialRiser.create();

})();

//////THIS IS THE ADDITIONAL MATERIAL////////

//sort the waterfall entries in descending order, from most positive to most negative
function sortWf(){
}

//set a proportional delay
function addWfdelay(){
	var timeOffset = 0; //counter holds the offsets as they advance

}

//take in waterfall data, determine scales, and add x, y, delay and w values
function addWfXY(){
	//set x scale based on w - labels
	//bar width is always its scalex - scaleX(0)
	//	
		
}

//Draw horizonal rects, full-width, on top of everything in the waterfall
function drawListeners(){	
	
	//when a listener is moused over, it calls the tooltip function
	function wfMousover(){
	
		function wfTooltip(){
	
		}	



				
	}	
	
	
	//resets the listener and all of its descendents, using the data which is bound to them
	function wfMouseout(){
		
	}
	
	


}
	

